{% extends "patient_base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2 class="h3">Book Appointment</h2>
        <p class="text-muted">Schedule an appointment with our expert doctors.</p>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Appointment Details</h5>
            </div>
            <div class="card-body">
                <form method="POST" action="/patient/appointments/book">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="doctor_id" class="form-label">Select Doctor *</label>
                            <select class="form-select" id="doctor_id" name="doctor_id" required>
                                <option value="">Choose a doctor...</option>
                                {% for doctor in doctors %}
                                <option value="{{ doctor.id }}">
                                    {{ doctor.name }} - {{ doctor.department }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="appointment_date" class="form-label">Appointment Date *</label>
                            <input type="date" class="form-control" id="appointment_date" name="appointment_date" 
                                   min="{{ (datetime.now() + timedelta(days=1)).strftime('%Y-%m-%d') }}" required>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="appointment_time" class="form-label">Appointment Time *</label>
                            <select class="form-select" id="appointment_time" name="appointment_time" required>
                                <option value="">Select time...</option>
                                <option value="09:00">09:00 AM</option>
                                <option value="09:30">09:30 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="10:30">10:30 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="14:00">02:00 PM</option>
                                <option value="14:30">02:30 PM</option>
                                <option value="15:00">03:00 PM</option>
                                <option value="15:30">03:30 PM</option>
                                <option value="16:00">04:00 PM</option>
                                <option value="16:30">04:30 PM</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="reason" class="form-label">Reason for Visit *</label>
                        <textarea class="form-control" id="reason" name="reason" rows="3" 
                                  placeholder="Please describe your symptoms or reason for the appointment..." required></textarea>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="/patient/dashboard" class="btn btn-secondary me-md-2">Cancel</a>
                        <button type="submit" class="btn btn-primary">Book Appointment</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Available Doctors</h5>
            </div>
            <div class="card-body">
                {% for doctor in doctors[:5] %}
                <div class="d-flex align-items-center mb-3">
                    <div class="user-avatar me-3">{{ doctor.name[3] if doctor.name.startswith('Dr.') else doctor.name[0] }}</div>
                    <div>
                        <h6 class="mb-0">{{ doctor.name }}</h6>
                        <small class="text-muted">{{ doctor.department }}</small>
                        <br><small class="text-muted">{{ doctor.experience }} years exp.</small>
                    </div>
                </div>
                {% endfor %}
                
                <a href="/patient/doctors" class="btn btn-outline-primary btn-sm w-100 mt-2">
                    View All Doctors
                </a>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="card-title mb-0">Appointment Guidelines</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Arrive 15 minutes early</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Bring valid ID and insurance</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>List current medications</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Prepare questions for doctor</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #28a745, #20c997);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
}
</style>
{% endblock %}